/*
 * This Kotlin source file was generated by the Gradle 'init' task.
 */
package sample

fun calculateScore(input: String): Int {
    val frames = input.split("||", "|").dropLast(1)

    return calculateFramesScore(frames)
}

internal tailrec fun calculateFramesScore(frames: List<String>): Int {
    if (frames.isEmpty()) return 0

    val currentFrame = frames.first()
    val nextFrames = frames.drop(1)

    var score = 0

    if (currentFrame == "X") {
        score += 10

        if (nextFrames[0] == "X") {
            score += 10
            if (nextFrames[1][0] != '-') score += nextFrames[1][0].digitToInt()
        } else {
            if (nextFrames[0][0] != '-') score += nextFrames[0][0].digitToInt()
            if (nextFrames[0][1] != '-') score += nextFrames[0][1].digitToInt()
        }
    } else {
        if (currentFrame[0] != '-') score += currentFrame[0].digitToInt()
        if (currentFrame[1] != '-') score += currentFrame[1].digitToInt()
    }

    return score + calculateFramesScore(nextFrames)
}
